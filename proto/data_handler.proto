syntax="proto3";
package data_handler;
option go_package = "github.com/condemo/movie-hub/common/services/pb";

service DataHandler {
  rpc GetLastUpdates(LastUpdatesRequest) returns (MediaListResponse) {}
  rpc GetOneMedia(MediaRequest) returns (Media) {}
  rpc GetMediaFiltered(MediaFilteredRequest) returns (MediaListResponse) {}
}

enum MediaType {
  Movie = 0;
  Serie = 1;
  Both = 2;
}

enum FilterBy {
  fav = 0;
  viewed = 1;
}

message Media {
  int64 id = 1;
  string type = 2;
  string title = 3;
  int32 year = 4;
  int32 firstAir = 5;
  string genres = 6;
  int32 seasons = 7;
  int32 caps = 8;
  string description = 9;
  int32 rating = 10;
  string image = 11;
  bool fav = 12;
  bool viewed = 13;
}

message MediaResume {
  int64 id = 1;
  string type = 2;
  string title = 3;
  string genres = 4;
  string description = 5;
  string image = 6;
  bool fav = 7;
  bool viewed = 8;
}

message LastUpdatesRequest {
  MediaType type = 1;
  optional int32 limit = 2;
}


message MediaRequest {
  int64 id = 1;
}

message MediaFilteredRequest {
  FilterBy filter = 1;
  optional int32 limit = 2;
}

message MediaResponse {
  Media media = 1;
}

message MediaListResponse {
  repeated MediaResume mediaList = 1;
}
